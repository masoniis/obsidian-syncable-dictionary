/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SyncableDictionaryPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/privateDictAPI.ts
var PrivateDictAPI = class {
  constructor() {
    const electron = require("electron");
    if (electron && electron.remote) {
      const remote = electron.remote;
      const currentWebContents = remote.getCurrentWebContents();
      this.session = currentWebContents.session;
    }
  }
  addWord(newEntry) {
    this.session.addWordToSpellCheckerDictionary(newEntry);
  }
  removeWord(word) {
    this.session.removeWordFromSpellCheckerDictionary(word);
  }
  async listWords() {
    return await this.session.listWordsInSpellCheckerDictionary();
  }
};
var privateDictAPI = new PrivateDictAPI();

// src/ui/settingsTab.ts
var import_obsidian = require("obsidian");
var SyncableDictionarySettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.filteredWords = [];
    this.plugin = plugin;
  }
  refresh() {
    this.filteredWords = [...this.plugin.settings.globalWords];
    this.updateWordCount();
    this.renderWordsList();
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    document.body.classList.add("global-dictionary-settings");
    this.addStyles();
    containerEl.createEl("h2", { text: "Global Dictionary Sync Settings" });
    const addWordSetting = new import_obsidian.Setting(containerEl).setName("Add Word to Dictionary").setDesc("Enter a word to add to your global dictionary.");
    const addWordContainer = addWordSetting.controlEl.createDiv(
      "dictionary-add-container"
    );
    const addWordInput = addWordContainer.createEl("input", {
      attr: {
        type: "text",
        placeholder: "Enter a word..."
      },
      cls: "dictionary-add-input"
    });
    const addWordButton = addWordContainer.createEl("button", {
      text: "Add Word",
      cls: "dictionary-add-button"
    });
    addWordButton.addEventListener("click", async () => {
      const word = addWordInput.value.trim();
      if (word) {
        if (!this.plugin.settings.globalWords.includes(word)) {
          try {
            privateDictAPI.addWord(word);
          } catch (e) {
            new import_obsidian.Notice(
              `NOTE: Updating dict doesn't work on iOS (untested on android).

 Can't update dictionary: ${e}.`
            );
            return;
          }
          this.plugin.settings.globalWords.push(word);
          this.plugin.settings.globalWords.sort(
            (a, b) => a.toLowerCase().localeCompare(b.toLowerCase())
          );
          await this.plugin.saveSettings();
          new import_obsidian.Notice(`'${word}' added to dictionary.`);
          addWordInput.value = "";
          this.filterWords();
          this.updateWordCount();
        } else {
          new import_obsidian.Notice(`'${word}' is already in your dictionary.`);
        }
      }
    });
    const dictionarySetting = new import_obsidian.Setting(containerEl).setName("Search Global Dictionary").setDesc("Search and remove words from your dictionary.");
    const searchContainer = dictionarySetting.controlEl.createDiv(
      "dictionary-search-container"
    );
    this.searchInput = searchContainer.createEl("input", {
      attr: {
        type: "text",
        id: "dictionary-search",
        placeholder: "Type to filter words..."
      }
    });
    this.searchInput.addEventListener("input", () => {
      this.filterWords();
    });
    const wordsContainer = containerEl.createDiv("dictionary-words-container");
    this.wordsList = wordsContainer.createDiv("dictionary-words-list");
    this.countIndicator = containerEl.createDiv("dictionary-count");
    this.countIndicator.createSpan({
      text: `Total words in dictionary: ${this.plugin.settings.globalWords.length}`
    });
    this.filteredWords = [...this.plugin.settings.globalWords];
    this.renderWordsList();
  }
  filterWords() {
    const searchTerm = this.searchInput.value.toLowerCase();
    if (searchTerm) {
      this.filteredWords = this.plugin.settings.globalWords.filter(
        (word) => word.toLowerCase().includes(searchTerm)
      );
    } else {
      this.filteredWords = [...this.plugin.settings.globalWords];
    }
    this.renderWordsList();
  }
  updateWordCount() {
    if (this.countIndicator) {
      this.countIndicator.empty();
      this.countIndicator.createSpan({
        text: `Total words in dictionary: ${this.plugin.settings.globalWords.length}`
      });
    }
  }
  renderWordsList() {
    this.wordsList.empty();
    if (this.filteredWords.length === 0) {
      if (this.searchInput.value) {
        this.wordsList.createEl("p", {
          text: "No matching words found.",
          cls: "dictionary-empty-message"
        });
      } else {
        this.wordsList.createEl("p", {
          text: 'No words in the dictionary yet. Use the command "Add selection to Global Dictionary" to add some!',
          cls: "dictionary-empty-message"
        });
      }
      return;
    }
    const ul = this.wordsList.createEl("ul", { cls: "dictionary-words-ul" });
    this.filteredWords.forEach((word) => {
      const li = ul.createEl("li", { cls: "dictionary-word-item" });
      li.createSpan({ text: word, cls: "dictionary-word-text" });
      const removeButton = li.createEl("button", {
        text: "Remove",
        cls: "dictionary-remove-button"
      });
      removeButton.addEventListener("click", async () => {
        try {
          privateDictAPI.removeWord(word);
          this.plugin.settings.globalWords = this.plugin.settings.globalWords.filter((w) => w !== word);
          await this.plugin.saveSettings();
          new import_obsidian.Notice(`'${word}' removed from dictionary.`);
          this.filterWords();
          this.updateWordCount();
        } catch (e) {
          new import_obsidian.Notice(
            `NOTE: Updating dict doesn't work on iOS (untested on android).

Error removing word: ${e}.`
          );
        }
      });
    });
  }
  addStyles() {
    if (!document.getElementById("global-dictionary-styles")) {
      const styleEl = document.head.createEl("style");
      styleEl.id = "global-dictionary-styles";
      styleEl.textContent = `
        .dictionary-search-container {
          display: flex;
          align-items: center;
          flex-grow: 1;
          width: 100%;
        }
        
        .dictionary-search-container input {
          width: 100%;
          padding: 8px;
          border-radius: 4px;
          border: 1px solid var(--background-modifier-border);
          background-color: var(--background-primary);
          color: var(--text-normal);
        }
        
        .dictionary-add-container {
          display: flex;
          width: 100%;
          gap: 8px;
        }
        
        .dictionary-add-input {
          flex-grow: 1;
          padding: 8px;
          border-radius: 4px;
          border: 1px solid var(--background-modifier-border);
          background-color: var(--background-primary);
          color: var(--text-normal);
        }
        
        .dictionary-add-button {
          padding: 8px 12px;
          border-radius: 4px;
          background-color: var(--interactive-accent);
          color: var(--text-on-accent);
          font-size: 0.8em;
          cursor: pointer;
          transition: background-color 0.2s;
          border: none;
        }
        
        .dictionary-add-button:hover {
          background-color: var(--interactive-accent-hover);
        }
        
        .dictionary-words-container {
          max-height: 350px;
          overflow-y: auto;
          border: 1px solid var(--background-modifier-border);
          border-radius: 4px;
          margin-bottom: 15px;
        }
        
        .dictionary-words-list {
          padding: 10px;
        }
        
        .dictionary-words-ul {
          list-style-type: none;
          padding-left: 0;
          margin: 0;
        }
        
        .dictionary-word-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 8px 5px;
          border-bottom: 1px solid var(--background-modifier-border-hover);
          transition: background-color 0.2s;
        }
        
        .dictionary-word-item:hover {
          background-color: var(--background-modifier-hover);
        }
        
        .dictionary-word-text {
          overflow: hidden;
          text-overflow: ellipsis;
        }
        
        .dictionary-remove-button {
          padding: 4px 8px;
          background: var(--background-modifier-error-rgb);
          color: white;
          border-radius: 4px;
          font-size: 0.8em;
          opacity: 0.7;
          transition: opacity 0.2s;
          cursor: pointer;
        }
        
        .dictionary-remove-button:hover {
          opacity: 1;
        }
        
        .dictionary-empty-message {
          padding: 20px;
          text-align: center;
          color: var(--text-muted);
        }
        
        .dictionary-count {
          text-align: right;
          font-size: 0.8em;
          color: var(--text-muted);
          padding: 5px;
        }
      `;
    }
  }
};

// src/ui/modal.ts
var import_obsidian2 = require("obsidian");
var DictionaryMergeModal = class extends import_obsidian2.Modal {
  constructor(app, plugin, wordsToRemove, onConfirmRemove, onMerge) {
    super(app);
    this.plugin = plugin;
    this.wordsToRemove = wordsToRemove;
    this.onConfirmRemove = onConfirmRemove;
    this.onMerge = onMerge;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Dictionary Sync Conflict" });
    contentEl.createEl("p", {
      text: `${this.wordsToRemove.length} words (shown below) will be removed from your local dictionary based on the synced dictionary.`
    });
    contentEl.createEl("p", {
      text: "Do you want to remove these, or merge them into the global synced dictionary?"
    });
    const wordsContainer = contentEl.createDiv(
      "dictionary-merge-words-container"
    );
    const wordsList = wordsContainer.createEl("ul");
    const displayWords = this.wordsToRemove.slice(0, 20);
    displayWords.forEach((word) => {
      wordsList.createEl("li", { text: word });
    });
    if (this.wordsToRemove.length > 20) {
      contentEl.createEl("p", {
        text: `...and ${this.wordsToRemove.length - 20} more words`,
        cls: "dictionary-merge-more-text"
      });
    }
    const buttonContainer = contentEl.createDiv("dictionary-merge-buttons");
    new import_obsidian2.ButtonComponent(buttonContainer).setButtonText(`Remove ${this.wordsToRemove.length} Words`).setCta().onClick(() => {
      this.onConfirmRemove();
      this.close();
    });
    new import_obsidian2.ButtonComponent(buttonContainer).setButtonText("Merge Words").onClick(() => {
      this.onMerge();
      this.close();
    });
    contentEl.createEl("style", {
      text: `
        .dictionary-merge-words-container {
          max-height: 200px;
          overflow-y: auto;
          border: 1px solid var(--background-modifier-border);
          border-radius: 4px;
          padding: 8px;
          margin-bottom: 16px;
        }
        
        .dictionary-merge-more-text {
          text-align: center;
          font-style: italic;
          color: var(--text-muted);
        }
        
        .dictionary-merge-buttons {
          display: flex;
          justify-content: space-around;
          margin-top: 20px;
          gap: 10px;
        }
      `
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  globalWords: [],
  warningThreshold: 5,
  syncPollingRate: 15 * 1e3
};
var SyncableDictionaryPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    await this.syncDictionaries(true, false);
    this.syncIntervalId = setInterval(async () => {
      const hasChanges = await this.checkForExternalChanges();
      if (hasChanges) {
        this.syncDictionaries(false, false);
      } else {
        this.syncDictionaries(false, true);
      }
    }, this.settings.syncPollingRate);
    console.log(
      `SyncableDictionary: Set up automatic sync every ${this.settings.syncPollingRate / 1e3} seconds.`
    );
    this.settingsTab = new SyncableDictionarySettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.addCommand({
      id: "add-selection-to-synced-dictionary",
      name: "Add selection to Global Dictionary",
      editorCallback: (editor, _) => {
        const selection = editor.getSelection();
        if (selection) {
          const word = selection.trim();
          if (word) {
            privateDictAPI.addWord(word);
          } else {
            new import_obsidian3.Notice("No word selected.");
          }
        } else {
          new import_obsidian3.Notice("No word selected.");
        }
      }
    });
  }
  onunload() {
    if (this.syncIntervalId)
      clearInterval(this.syncIntervalId);
    this.syncDictionaries(false, true).catch(
      (e) => console.error("Error during final dictionary sync:", e)
    );
  }
  async syncDictionaries(showNotice = false, shouldMerge = false) {
    try {
      const localWords = await privateDictAPI.listWords();
      if (localWords && Array.isArray(localWords)) {
        const wordsToRemove = localWords.filter(
          (word) => !this.settings.globalWords.includes(word)
        );
        const wordsToAdd = this.settings.globalWords.filter(
          (word) => !localWords.includes(word)
        );
        const merge = async () => {
          let mergedCount = 0;
          let madeChanges = false;
          for (const word of wordsToRemove) {
            if (!this.settings.globalWords.includes(word)) {
              this.settings.globalWords.push(word);
              mergedCount++;
              madeChanges = true;
            }
          }
          for (const word of wordsToAdd) {
            privateDictAPI.addWord(word);
          }
          if (madeChanges) {
            this.settings.globalWords.sort(
              (a, b) => a.toLowerCase().localeCompare(b.toLowerCase())
            );
            await this.saveSettings();
          }
          return mergedCount;
        };
        if (shouldMerge) {
          merge();
          return;
        }
        if (wordsToRemove.length >= this.settings.warningThreshold) {
          const modal = new DictionaryMergeModal(
            this.app,
            this,
            wordsToRemove,
            // Function to execute if user confirms removal
            async () => {
              for (const word of wordsToRemove) {
                privateDictAPI.removeWord(word);
              }
              for (const word of wordsToAdd) {
                privateDictAPI.addWord(word);
              }
              if (showNotice) {
                new import_obsidian3.Notice(
                  `Dictionary sync complete: ${wordsToAdd.length} words added, ${wordsToRemove.length} words removed`
                );
              }
            },
            // Function to execute if user chooses to merge instead
            async () => {
              const mergedCount = await merge();
              if (showNotice) {
                new import_obsidian3.Notice(
                  `Dictionary merged: ${mergedCount} words added to global dictionary, ${wordsToAdd.length} words added to system`
                );
              }
            }
          );
          modal.open();
        } else {
          let removedFromApiCount = 0;
          for (const word of wordsToRemove) {
            privateDictAPI.removeWord(word);
            removedFromApiCount++;
          }
          let addedToApiCount = 0;
          for (const word of wordsToAdd) {
            privateDictAPI.addWord(word);
            addedToApiCount++;
          }
          if ((addedToApiCount > 0 || removedFromApiCount > 0) && showNotice) {
            new import_obsidian3.Notice(
              `Dictionary sync complete: ${addedToApiCount} words added to system, ${removedFromApiCount} removed from system`
            );
          }
        }
      }
    } catch (dictError) {
      console.error("Failed to sync dictionaries:", dictError);
    }
  }
  async checkForExternalChanges() {
    const latestData = await this.loadData();
    if (!latestData || !latestData.globalWords)
      return false;
    const currentWords = this.settings.globalWords;
    const externalWords = latestData.globalWords;
    if (currentWords.length !== externalWords.length || !currentWords.every((word) => externalWords.includes(word)) || !externalWords.every((word) => currentWords.includes(word))) {
      this.settings.globalWords = [...externalWords];
      this.settings.globalWords.sort(
        (a, b) => a.toLowerCase().localeCompare(b.toLowerCase())
      );
      this.settingsTab.refresh();
      console.log(
        `External settings file has changed, replaced in-memory dictionary with ${externalWords.length} words`
      );
      return true;
    }
    return false;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ByaXZhdGVEaWN0QVBJLnRzIiwgInNyYy91aS9zZXR0aW5nc1RhYi50cyIsICJzcmMvdWkvbW9kYWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbXBvcnQgeyBwcml2YXRlRGljdEFQSSB9IGZyb20gXCIuL3ByaXZhdGVEaWN0QVBJXCI7XG5pbXBvcnQgeyBTeW5jYWJsZURpY3Rpb25hcnlTZXR0aW5nc1RhYiB9IGZyb20gXCIuL3VpL3NldHRpbmdzVGFiXCI7XG5pbXBvcnQgeyBEaWN0aW9uYXJ5TWVyZ2VNb2RhbCB9IGZyb20gXCIuL3VpL21vZGFsXCI7XG5cbmludGVyZmFjZSBTeW5jYWJsZURpY3Rpb25hcnlTZXR0aW5ncyB7XG4gIGdsb2JhbFdvcmRzOiBzdHJpbmdbXTtcbiAgd2FybmluZ1RocmVzaG9sZDogbnVtYmVyO1xuICBzeW5jUG9sbGluZ1JhdGU6IG51bWJlcjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogU3luY2FibGVEaWN0aW9uYXJ5U2V0dGluZ3MgPSB7XG4gIGdsb2JhbFdvcmRzOiBbXSxcbiAgd2FybmluZ1RocmVzaG9sZDogNSxcbiAgc3luY1BvbGxpbmdSYXRlOiAxNSAqIDEwMDAsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTeW5jYWJsZURpY3Rpb25hcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogU3luY2FibGVEaWN0aW9uYXJ5U2V0dGluZ3M7XG4gIHNldHRpbmdzVGFiOiBTeW5jYWJsZURpY3Rpb25hcnlTZXR0aW5nc1RhYjtcbiAgc3luY0ludGVydmFsSWQ6IE5vZGVKUy5UaW1lb3V0O1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAvLyBMb2FkIHNldHRpbmdzIGFuZCBwZXJmb3JtIGEgZGVzdHJ1Y3RpdmUgc3luY1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgYXdhaXQgdGhpcy5zeW5jRGljdGlvbmFyaWVzKHRydWUsIGZhbHNlKTtcblxuICAgIC8vIFNldCB1cCBhIHBlcmlvZGljIHN5bmNpbmcgaW50ZXJ2YWxcbiAgICB0aGlzLnN5bmNJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaGFzQ2hhbmdlcyA9IGF3YWl0IHRoaXMuY2hlY2tGb3JFeHRlcm5hbENoYW5nZXMoKTtcbiAgICAgIGlmIChoYXNDaGFuZ2VzKSB7XG4gICAgICAgIC8vIERlc3RydWNpdmVseSByZXBsYWNlIGxvY2FsIGRpY3Qgd2l0aCBleHRlcm5hbCBkaWN0XG4gICAgICAgIHRoaXMuc3luY0RpY3Rpb25hcmllcyhmYWxzZSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29uc3RydWN0aXZlbHkgY29tYmluZSBsb2NhbCB3aXRoIGV4dGVybmFsIGRpY3RcbiAgICAgICAgdGhpcy5zeW5jRGljdGlvbmFyaWVzKGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzLnNldHRpbmdzLnN5bmNQb2xsaW5nUmF0ZSk7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBTeW5jYWJsZURpY3Rpb25hcnk6IFNldCB1cCBhdXRvbWF0aWMgc3luYyBldmVyeSAke3RoaXMuc2V0dGluZ3Muc3luY1BvbGxpbmdSYXRlIC8gMTAwMH0gc2Vjb25kcy5gLFxuICAgICk7XG5cbiAgICB0aGlzLnNldHRpbmdzVGFiID0gbmV3IFN5bmNhYmxlRGljdGlvbmFyeVNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nc1RhYik7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiYWRkLXNlbGVjdGlvbi10by1zeW5jZWQtZGljdGlvbmFyeVwiLFxuICAgICAgbmFtZTogXCJBZGQgc2VsZWN0aW9uIHRvIEdsb2JhbCBEaWN0aW9uYXJ5XCIsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCBfOiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgY29uc3Qgd29yZCA9IHNlbGVjdGlvbi50cmltKCk7XG4gICAgICAgICAgaWYgKHdvcmQpIHtcbiAgICAgICAgICAgIHByaXZhdGVEaWN0QVBJLmFkZFdvcmQod29yZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyB3b3JkIHNlbGVjdGVkLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIk5vIHdvcmQgc2VsZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgaWYgKHRoaXMuc3luY0ludGVydmFsSWQpIGNsZWFySW50ZXJ2YWwodGhpcy5zeW5jSW50ZXJ2YWxJZCk7XG5cbiAgICAvLyBGaW5hbCBzeW5jIG9mIGRpY3Rpb25hcnkgYmVmb3JlIHVubG9hZGluZ1xuICAgIHRoaXMuc3luY0RpY3Rpb25hcmllcyhmYWxzZSwgdHJ1ZSkuY2F0Y2goKGUpID0+XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIGZpbmFsIGRpY3Rpb25hcnkgc3luYzpcIiwgZSksXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHN5bmNEaWN0aW9uYXJpZXMoXG4gICAgc2hvd05vdGljZTogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHNob3VsZE1lcmdlOiBib29sZWFuID0gZmFsc2UsXG4gICkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBsb2NhbFdvcmRzID0gYXdhaXQgcHJpdmF0ZURpY3RBUEkubGlzdFdvcmRzKCk7XG5cbiAgICAgIGlmIChsb2NhbFdvcmRzICYmIEFycmF5LmlzQXJyYXkobG9jYWxXb3JkcykpIHtcbiAgICAgICAgLy8gSWRlbnRpZnkgd29yZHMgdG8gcmVtb3ZlIGZyb20gbG9jYWwgZGljdGlvbmFyeVxuICAgICAgICBjb25zdCB3b3Jkc1RvUmVtb3ZlID0gbG9jYWxXb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgKHdvcmQpID0+ICF0aGlzLnNldHRpbmdzLmdsb2JhbFdvcmRzLmluY2x1ZGVzKHdvcmQpLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIElkZW50aWZ5IHdvcmRzIHRvIGFkZCB0byBsb2NhbCBkaWN0aW9uYXJ5XG4gICAgICAgIGNvbnN0IHdvcmRzVG9BZGQgPSB0aGlzLnNldHRpbmdzLmdsb2JhbFdvcmRzLmZpbHRlcihcbiAgICAgICAgICAod29yZCkgPT4gIWxvY2FsV29yZHMuaW5jbHVkZXMod29yZCksXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbWVyZ2UgPSBhc3luYyAoKTogUHJvbWlzZTxudW1iZXI+ID0+IHtcbiAgICAgICAgICBsZXQgbWVyZ2VkQ291bnQgPSAwO1xuICAgICAgICAgIGxldCBtYWRlQ2hhbmdlcyA9IGZhbHNlO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzVG9SZW1vdmUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5nbG9iYWxXb3Jkcy5pbmNsdWRlcyh3b3JkKSkge1xuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmdsb2JhbFdvcmRzLnB1c2god29yZCk7XG4gICAgICAgICAgICAgIG1lcmdlZENvdW50Kys7XG4gICAgICAgICAgICAgIG1hZGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgbWlzc2luZyB3b3JkcyB0byBsY29hbCBkaWN0aW9uYXJ5XG4gICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzVG9BZGQpIHtcbiAgICAgICAgICAgIHByaXZhdGVEaWN0QVBJLmFkZFdvcmQod29yZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG1hZGVDaGFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmdsb2JhbFdvcmRzLnNvcnQoKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PlxuICAgICAgICAgICAgICBhLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZShiLnRvTG93ZXJDYXNlKCkpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1lcmdlZENvdW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzaG91bGRNZXJnZSkge1xuICAgICAgICAgIC8vIGlmIHdlIG1lcmdlIHdlIHJldHVybiBlYXJseVxuICAgICAgICAgIG1lcmdlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2Ugc3VycGFzcyB3YXJuaW5nIHRocmVzaG9sZCwgc2hvdyBjb25maXJtYXRpb24gZGlhbG9nXG4gICAgICAgIGlmICh3b3Jkc1RvUmVtb3ZlLmxlbmd0aCA+PSB0aGlzLnNldHRpbmdzLndhcm5pbmdUaHJlc2hvbGQpIHtcbiAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBEaWN0aW9uYXJ5TWVyZ2VNb2RhbChcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIHdvcmRzVG9SZW1vdmUsXG4gICAgICAgICAgICAvLyBGdW5jdGlvbiB0byBleGVjdXRlIGlmIHVzZXIgY29uZmlybXMgcmVtb3ZhbFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgd29yZHMgZnJvbSBzeXN0ZW0gZGljdGlvbmFyeVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHNUb1JlbW92ZSkge1xuICAgICAgICAgICAgICAgIHByaXZhdGVEaWN0QVBJLnJlbW92ZVdvcmQod29yZCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBBZGQgbWlzc2luZyB3b3JkcyB0byBzeXN0ZW0gZGljdGlvbmFyeVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHNUb0FkZCkge1xuICAgICAgICAgICAgICAgIHByaXZhdGVEaWN0QVBJLmFkZFdvcmQod29yZCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoc2hvd05vdGljZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgICAgICAgICAgICBgRGljdGlvbmFyeSBzeW5jIGNvbXBsZXRlOiAke3dvcmRzVG9BZGQubGVuZ3RofSB3b3JkcyBhZGRlZCwgJHt3b3Jkc1RvUmVtb3ZlLmxlbmd0aH0gd29yZHMgcmVtb3ZlZGAsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIGV4ZWN1dGUgaWYgdXNlciBjaG9vc2VzIHRvIG1lcmdlIGluc3RlYWRcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkQ291bnQgPSBhd2FpdCBtZXJnZSgpO1xuXG4gICAgICAgICAgICAgIGlmIChzaG93Tm90aWNlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgIGBEaWN0aW9uYXJ5IG1lcmdlZDogJHttZXJnZWRDb3VudH0gd29yZHMgYWRkZWQgdG8gZ2xvYmFsIGRpY3Rpb25hcnksICR7d29yZHNUb0FkZC5sZW5ndGh9IHdvcmRzIGFkZGVkIHRvIHN5c3RlbWAsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiA1IG9yIGZld2VyIHdvcmRzIHRvIHJlbW92ZSwgcHJvY2VlZCB3aXRoIG5vcm1hbCBzeW5jXG4gICAgICAgICAgbGV0IHJlbW92ZWRGcm9tQXBpQ291bnQgPSAwO1xuICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkc1RvUmVtb3ZlKSB7XG4gICAgICAgICAgICBwcml2YXRlRGljdEFQSS5yZW1vdmVXb3JkKHdvcmQpO1xuICAgICAgICAgICAgcmVtb3ZlZEZyb21BcGlDb3VudCsrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBhZGRlZFRvQXBpQ291bnQgPSAwO1xuICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkc1RvQWRkKSB7XG4gICAgICAgICAgICBwcml2YXRlRGljdEFQSS5hZGRXb3JkKHdvcmQpO1xuICAgICAgICAgICAgYWRkZWRUb0FwaUNvdW50Kys7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKChhZGRlZFRvQXBpQ291bnQgPiAwIHx8IHJlbW92ZWRGcm9tQXBpQ291bnQgPiAwKSAmJiBzaG93Tm90aWNlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICBgRGljdGlvbmFyeSBzeW5jIGNvbXBsZXRlOiAke2FkZGVkVG9BcGlDb3VudH0gd29yZHMgYWRkZWQgdG8gc3lzdGVtLCAke3JlbW92ZWRGcm9tQXBpQ291bnR9IHJlbW92ZWQgZnJvbSBzeXN0ZW1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChkaWN0RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3luYyBkaWN0aW9uYXJpZXM6XCIsIGRpY3RFcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JFeHRlcm5hbENoYW5nZXMoKSB7XG4gICAgLy8gTG9hZCB0aGUgbGF0ZXN0IGRhdGEgZnJvbSBkaXNrXG4gICAgY29uc3QgbGF0ZXN0RGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFN5bmNhYmxlRGljdGlvbmFyeVNldHRpbmdzO1xuXG4gICAgaWYgKCFsYXRlc3REYXRhIHx8ICFsYXRlc3REYXRhLmdsb2JhbFdvcmRzKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IGRpZmZlcmVuY2VzIGJldHdlZW4gZGlzayBkYXRhIGFuZCBjdXJyZW50IG1lbW9yeVxuICAgIC8vIGJ5IGNvbXBhcmluZyBsZW5ndGhzIGFuZCBjb250ZW50c1xuICAgIGNvbnN0IGN1cnJlbnRXb3JkcyA9IHRoaXMuc2V0dGluZ3MuZ2xvYmFsV29yZHM7XG4gICAgY29uc3QgZXh0ZXJuYWxXb3JkcyA9IGxhdGVzdERhdGEuZ2xvYmFsV29yZHM7XG5cbiAgICBpZiAoXG4gICAgICBjdXJyZW50V29yZHMubGVuZ3RoICE9PSBleHRlcm5hbFdvcmRzLmxlbmd0aCB8fFxuICAgICAgIWN1cnJlbnRXb3Jkcy5ldmVyeSgod29yZCkgPT4gZXh0ZXJuYWxXb3Jkcy5pbmNsdWRlcyh3b3JkKSkgfHxcbiAgICAgICFleHRlcm5hbFdvcmRzLmV2ZXJ5KCh3b3JkKSA9PiBjdXJyZW50V29yZHMuaW5jbHVkZXMod29yZCkpXG4gICAgKSB7XG4gICAgICAvLyBjb21wbGV0ZWx5IHJlcGxhY2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIGV4dGVybmFsIGRhdGFcbiAgICAgIHRoaXMuc2V0dGluZ3MuZ2xvYmFsV29yZHMgPSBbLi4uZXh0ZXJuYWxXb3Jkc107XG5cbiAgICAgIC8vIHJlc29ydCB0aGUgbGlzdFxuICAgICAgdGhpcy5zZXR0aW5ncy5nbG9iYWxXb3Jkcy5zb3J0KChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT5cbiAgICAgICAgYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIHJlZnJlc2ggc2V0dGluZ3MgdGFiIHNvIHRoYXQgd29yZGNvdW50cyBhbmQgd29yZHMgdXBkYXRlXG4gICAgICB0aGlzLnNldHRpbmdzVGFiLnJlZnJlc2goKTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBFeHRlcm5hbCBzZXR0aW5ncyBmaWxlIGhhcyBjaGFuZ2VkLCByZXBsYWNlZCBpbi1tZW1vcnkgZGljdGlvbmFyeSB3aXRoICR7ZXh0ZXJuYWxXb3Jkcy5sZW5ndGh9IHdvcmRzYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuIiwgIi8vIElORk86IFRoaXMgY2xhc3MgaXMgcHJvbmUgdG8gYnJlYWtpbmcgYmVjYXVzZSBpdCBjYWxscyBwcml2YXRlIG1ldGhvZHNcbmV4cG9ydCBjbGFzcyBQcml2YXRlRGljdEFQSSB7XG4gIHByaXZhdGUgc2Vzc2lvbjogYW55O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGVsZWN0cm9uID0gcmVxdWlyZShcImVsZWN0cm9uXCIpIGFzIGFueTtcbiAgICBpZiAoZWxlY3Ryb24gJiYgZWxlY3Ryb24ucmVtb3RlKSB7XG4gICAgICBjb25zdCByZW1vdGUgPSBlbGVjdHJvbi5yZW1vdGU7XG4gICAgICBjb25zdCBjdXJyZW50V2ViQ29udGVudHMgPSByZW1vdGUuZ2V0Q3VycmVudFdlYkNvbnRlbnRzKCk7XG4gICAgICB0aGlzLnNlc3Npb24gPSBjdXJyZW50V2ViQ29udGVudHMuc2Vzc2lvbjtcbiAgICB9XG4gIH1cblxuICBhZGRXb3JkKG5ld0VudHJ5OiBzdHJpbmcpIHtcbiAgICB0aGlzLnNlc3Npb24uYWRkV29yZFRvU3BlbGxDaGVja2VyRGljdGlvbmFyeShuZXdFbnRyeSk7XG4gIH1cblxuICByZW1vdmVXb3JkKHdvcmQ6IHN0cmluZykge1xuICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVXb3JkRnJvbVNwZWxsQ2hlY2tlckRpY3Rpb25hcnkod29yZCk7XG4gIH1cblxuICBhc3luYyBsaXN0V29yZHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnNlc3Npb24ubGlzdFdvcmRzSW5TcGVsbENoZWNrZXJEaWN0aW9uYXJ5KCk7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcHJpdmF0ZURpY3RBUEkgPSBuZXcgUHJpdmF0ZURpY3RBUEkoKTtcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgcHJpdmF0ZURpY3RBUEkgfSBmcm9tIFwiLi4vcHJpdmF0ZURpY3RBUElcIjtcbmltcG9ydCBTeW5jYWJsZURpY3Rpb25hcnlQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNhYmxlRGljdGlvbmFyeVNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogU3luY2FibGVEaWN0aW9uYXJ5UGx1Z2luO1xuICBzZWFyY2hJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgd29yZHNMaXN0OiBIVE1MRWxlbWVudDtcbiAgY291bnRJbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xuICBmaWx0ZXJlZFdvcmRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN5bmNhYmxlRGljdGlvbmFyeVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIHJlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJlZFdvcmRzID0gWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbFdvcmRzXTtcbiAgICB0aGlzLnVwZGF0ZVdvcmRDb3VudCgpO1xuICAgIHRoaXMucmVuZGVyV29yZHNMaXN0KCk7XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJnbG9iYWwtZGljdGlvbmFyeS1zZXR0aW5nc1wiKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJHbG9iYWwgRGljdGlvbmFyeSBTeW5jIFNldHRpbmdzXCIgfSk7XG5cbiAgICAvLyBOZXcgd29yZCBpbnB1dCBhbmQgYWRkIGJ1dHRvblxuICAgIGNvbnN0IGFkZFdvcmRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkFkZCBXb3JkIHRvIERpY3Rpb25hcnlcIilcbiAgICAgIC5zZXREZXNjKFwiRW50ZXIgYSB3b3JkIHRvIGFkZCB0byB5b3VyIGdsb2JhbCBkaWN0aW9uYXJ5LlwiKTtcblxuICAgIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIHRoZSBpbnB1dCBhbmQgYnV0dG9uXG4gICAgY29uc3QgYWRkV29yZENvbnRhaW5lciA9IGFkZFdvcmRTZXR0aW5nLmNvbnRyb2xFbC5jcmVhdGVEaXYoXG4gICAgICBcImRpY3Rpb25hcnktYWRkLWNvbnRhaW5lclwiLFxuICAgICk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGlucHV0IGVsZW1lbnRcbiAgICBjb25zdCBhZGRXb3JkSW5wdXQgPSBhZGRXb3JkQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgYXR0cjoge1xuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwiRW50ZXIgYSB3b3JkLi4uXCIsXG4gICAgICB9LFxuICAgICAgY2xzOiBcImRpY3Rpb25hcnktYWRkLWlucHV0XCIsXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGFkZCBidXR0b25cbiAgICBjb25zdCBhZGRXb3JkQnV0dG9uID0gYWRkV29yZENvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIkFkZCBXb3JkXCIsXG4gICAgICBjbHM6IFwiZGljdGlvbmFyeS1hZGQtYnV0dG9uXCIsXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGJ1dHRvblxuICAgIGFkZFdvcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdvcmQgPSBhZGRXb3JkSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKHdvcmQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxXb3Jkcy5pbmNsdWRlcyh3b3JkKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcml2YXRlRGljdEFQSS5hZGRXb3JkKHdvcmQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgICAgICAgIGBOT1RFOiBVcGRhdGluZyBkaWN0IGRvZXNuJ3Qgd29yayBvbiBpT1MgKHVudGVzdGVkIG9uIGFuZHJvaWQpLlxcblxcbiBDYW4ndCB1cGRhdGUgZGljdGlvbmFyeTogJHtlfS5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsV29yZHMucHVzaCh3b3JkKTtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxXb3Jkcy5zb3J0KChhLCBiKSA9PlxuICAgICAgICAgICAgYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoYCcke3dvcmR9JyBhZGRlZCB0byBkaWN0aW9uYXJ5LmApO1xuICAgICAgICAgIGFkZFdvcmRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgdGhpcy5maWx0ZXJXb3JkcygpO1xuICAgICAgICAgIHRoaXMudXBkYXRlV29yZENvdW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgJyR7d29yZH0nIGlzIGFscmVhZHkgaW4geW91ciBkaWN0aW9uYXJ5LmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDb21iaW5lZCBTZWFyY2ggYW5kIERpY3Rpb25hcnkgTWFuYWdlbWVudFxuICAgIGNvbnN0IGRpY3Rpb25hcnlTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlNlYXJjaCBHbG9iYWwgRGljdGlvbmFyeVwiKVxuICAgICAgLnNldERlc2MoXCJTZWFyY2ggYW5kIHJlbW92ZSB3b3JkcyBmcm9tIHlvdXIgZGljdGlvbmFyeS5cIik7XG5cbiAgICAvLyBBZGQgc2VhcmNoIGlucHV0IHRvIHRoZSBzZXR0aW5nXG4gICAgY29uc3Qgc2VhcmNoQ29udGFpbmVyID0gZGljdGlvbmFyeVNldHRpbmcuY29udHJvbEVsLmNyZWF0ZURpdihcbiAgICAgIFwiZGljdGlvbmFyeS1zZWFyY2gtY29udGFpbmVyXCIsXG4gICAgKTtcblxuICAgIHRoaXMuc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICBhdHRyOiB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICBpZDogXCJkaWN0aW9uYXJ5LXNlYXJjaFwiLFxuICAgICAgICBwbGFjZWhvbGRlcjogXCJUeXBlIHRvIGZpbHRlciB3b3Jkcy4uLlwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuZmlsdGVyV29yZHMoKTtcbiAgICB9KTtcblxuICAgIC8vIFdvcmRzIGxpc3QgY29udGFpbmVyXG4gICAgY29uc3Qgd29yZHNDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoXCJkaWN0aW9uYXJ5LXdvcmRzLWNvbnRhaW5lclwiKTtcbiAgICB0aGlzLndvcmRzTGlzdCA9IHdvcmRzQ29udGFpbmVyLmNyZWF0ZURpdihcImRpY3Rpb25hcnktd29yZHMtbGlzdFwiKTtcblxuICAgIC8vIFdvcmQgY291bnQgaW5kaWNhdG9yXG4gICAgdGhpcy5jb3VudEluZGljYXRvciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdihcImRpY3Rpb25hcnktY291bnRcIik7XG4gICAgdGhpcy5jb3VudEluZGljYXRvci5jcmVhdGVTcGFuKHtcbiAgICAgIHRleHQ6IGBUb3RhbCB3b3JkcyBpbiBkaWN0aW9uYXJ5OiAke3RoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbFdvcmRzLmxlbmd0aH1gLFxuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgd29yZCBsaXN0XG4gICAgdGhpcy5maWx0ZXJlZFdvcmRzID0gWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbFdvcmRzXTtcbiAgICB0aGlzLnJlbmRlcldvcmRzTGlzdCgpO1xuICB9XG5cbiAgZmlsdGVyV29yZHMoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VhcmNoVGVybSA9IHRoaXMuc2VhcmNoSW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoc2VhcmNoVGVybSkge1xuICAgICAgdGhpcy5maWx0ZXJlZFdvcmRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsV29yZHMuZmlsdGVyKCh3b3JkKSA9PlxuICAgICAgICB3b3JkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlcmVkV29yZHMgPSBbLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsV29yZHNdO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcldvcmRzTGlzdCgpO1xuICB9XG5cbiAgdXBkYXRlV29yZENvdW50KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvdW50SW5kaWNhdG9yKSB7XG4gICAgICB0aGlzLmNvdW50SW5kaWNhdG9yLmVtcHR5KCk7XG4gICAgICB0aGlzLmNvdW50SW5kaWNhdG9yLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgVG90YWwgd29yZHMgaW4gZGljdGlvbmFyeTogJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxXb3Jkcy5sZW5ndGh9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcldvcmRzTGlzdCgpOiB2b2lkIHtcbiAgICB0aGlzLndvcmRzTGlzdC5lbXB0eSgpO1xuXG4gICAgaWYgKHRoaXMuZmlsdGVyZWRXb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICh0aGlzLnNlYXJjaElucHV0LnZhbHVlKSB7XG4gICAgICAgIHRoaXMud29yZHNMaXN0LmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgdGV4dDogXCJObyBtYXRjaGluZyB3b3JkcyBmb3VuZC5cIixcbiAgICAgICAgICBjbHM6IFwiZGljdGlvbmFyeS1lbXB0eS1tZXNzYWdlXCIsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53b3Jkc0xpc3QuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICB0ZXh0OiAnTm8gd29yZHMgaW4gdGhlIGRpY3Rpb25hcnkgeWV0LiBVc2UgdGhlIGNvbW1hbmQgXCJBZGQgc2VsZWN0aW9uIHRvIEdsb2JhbCBEaWN0aW9uYXJ5XCIgdG8gYWRkIHNvbWUhJyxcbiAgICAgICAgICBjbHM6IFwiZGljdGlvbmFyeS1lbXB0eS1tZXNzYWdlXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVsID0gdGhpcy53b3Jkc0xpc3QuY3JlYXRlRWwoXCJ1bFwiLCB7IGNsczogXCJkaWN0aW9uYXJ5LXdvcmRzLXVsXCIgfSk7XG5cbiAgICB0aGlzLmZpbHRlcmVkV29yZHMuZm9yRWFjaCgod29yZCkgPT4ge1xuICAgICAgY29uc3QgbGkgPSB1bC5jcmVhdGVFbChcImxpXCIsIHsgY2xzOiBcImRpY3Rpb25hcnktd29yZC1pdGVtXCIgfSk7XG4gICAgICBsaS5jcmVhdGVTcGFuKHsgdGV4dDogd29yZCwgY2xzOiBcImRpY3Rpb25hcnktd29yZC10ZXh0XCIgfSk7XG5cbiAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGxpLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdGV4dDogXCJSZW1vdmVcIixcbiAgICAgICAgY2xzOiBcImRpY3Rpb25hcnktcmVtb3ZlLWJ1dHRvblwiLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHByaXZhdGVEaWN0QVBJLnJlbW92ZVdvcmQod29yZCk7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsV29yZHMgPVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsV29yZHMuZmlsdGVyKCh3KSA9PiB3ICE9PSB3b3JkKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGAnJHt3b3JkfScgcmVtb3ZlZCBmcm9tIGRpY3Rpb25hcnkuYCk7XG4gICAgICAgICAgdGhpcy5maWx0ZXJXb3JkcygpOyAvLyBSZWZyZXNoIHRoZSBkaXNwbGF5XG4gICAgICAgICAgdGhpcy51cGRhdGVXb3JkQ291bnQoKTsgLy8gVXBkYXRlIHRoZSB3b3JkIGNvdW50XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgYE5PVEU6IFVwZGF0aW5nIGRpY3QgZG9lc24ndCB3b3JrIG9uIGlPUyAodW50ZXN0ZWQgb24gYW5kcm9pZCkuXFxuXFxuRXJyb3IgcmVtb3Zpbmcgd29yZDogJHtlfS5gLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnbG9iYWwtZGljdGlvbmFyeS1zdHlsZXNcIikpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5oZWFkLmNyZWF0ZUVsKFwic3R5bGVcIik7XG4gICAgICBzdHlsZUVsLmlkID0gXCJnbG9iYWwtZGljdGlvbmFyeS1zdHlsZXNcIjtcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXNlYXJjaC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXNlYXJjaC1jb250YWluZXIgaW5wdXQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmRpY3Rpb25hcnktYWRkLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmRpY3Rpb25hcnktYWRkLWlucHV0IHtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZGljdGlvbmFyeS1hZGQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LWFkZC1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXdvcmRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWF4LWhlaWdodDogMzUwcHg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXdvcmRzLWxpc3Qge1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXdvcmRzLXVsIHtcbiAgICAgICAgICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmRpY3Rpb25hcnktd29yZC1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDhweCA1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXdvcmQtaXRlbTpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LXdvcmQtdGV4dCB7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmRpY3Rpb25hcnktcmVtb3ZlLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLXJnYik7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZGljdGlvbmFyeS1yZW1vdmUtYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZGljdGlvbmFyeS1lbXB0eS1tZXNzYWdlIHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LWNvdW50IHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3luY2FibGVEaWN0aW9uYXJ5UGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWN0aW9uYXJ5TWVyZ2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBTeW5jYWJsZURpY3Rpb25hcnlQbHVnaW47XG4gIHdvcmRzVG9SZW1vdmU6IHN0cmluZ1tdO1xuICBvbkNvbmZpcm1SZW1vdmU6ICgpID0+IHZvaWQ7XG4gIG9uTWVyZ2U6ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcGx1Z2luOiBTeW5jYWJsZURpY3Rpb25hcnlQbHVnaW4sXG4gICAgd29yZHNUb1JlbW92ZTogc3RyaW5nW10sXG4gICAgb25Db25maXJtUmVtb3ZlOiAoKSA9PiB2b2lkLFxuICAgIG9uTWVyZ2U6ICgpID0+IHZvaWQsXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy53b3Jkc1RvUmVtb3ZlID0gd29yZHNUb1JlbW92ZTtcbiAgICB0aGlzLm9uQ29uZmlybVJlbW92ZSA9IG9uQ29uZmlybVJlbW92ZTtcbiAgICB0aGlzLm9uTWVyZ2UgPSBvbk1lcmdlO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkRpY3Rpb25hcnkgU3luYyBDb25mbGljdFwiIH0pO1xuXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICB0ZXh0OiBgJHt0aGlzLndvcmRzVG9SZW1vdmUubGVuZ3RofSB3b3JkcyAoc2hvd24gYmVsb3cpIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHlvdXIgbG9jYWwgZGljdGlvbmFyeSBiYXNlZCBvbiB0aGUgc3luY2VkIGRpY3Rpb25hcnkuYCxcbiAgICB9KTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgdGV4dDogXCJEbyB5b3Ugd2FudCB0byByZW1vdmUgdGhlc2UsIG9yIG1lcmdlIHRoZW0gaW50byB0aGUgZ2xvYmFsIHN5bmNlZCBkaWN0aW9uYXJ5P1wiLFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBmb3IgZGlzcGxheWluZyB3b3Jkc1xuICAgIGNvbnN0IHdvcmRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdihcbiAgICAgIFwiZGljdGlvbmFyeS1tZXJnZS13b3Jkcy1jb250YWluZXJcIixcbiAgICApO1xuICAgIGNvbnN0IHdvcmRzTGlzdCA9IHdvcmRzQ29udGFpbmVyLmNyZWF0ZUVsKFwidWxcIik7XG5cbiAgICAvLyBTaG93IGF0IG1vc3QgMjAgd29yZHMgdG8gYXZvaWQgZXhjZXNzaXZlbHkgbGFyZ2UgbW9kYWxzXG4gICAgY29uc3QgZGlzcGxheVdvcmRzID0gdGhpcy53b3Jkc1RvUmVtb3ZlLnNsaWNlKDAsIDIwKTtcbiAgICBkaXNwbGF5V29yZHMuZm9yRWFjaCgod29yZCkgPT4ge1xuICAgICAgd29yZHNMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiB3b3JkIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG1vcmUgd29yZHMgdGhhbiB3ZSdyZSBzaG93aW5nXG4gICAgaWYgKHRoaXMud29yZHNUb1JlbW92ZS5sZW5ndGggPiAyMCkge1xuICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgIHRleHQ6IGAuLi5hbmQgJHt0aGlzLndvcmRzVG9SZW1vdmUubGVuZ3RoIC0gMjB9IG1vcmUgd29yZHNgLFxuICAgICAgICBjbHM6IFwiZGljdGlvbmFyeS1tZXJnZS1tb3JlLXRleHRcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJkaWN0aW9uYXJ5LW1lcmdlLWJ1dHRvbnNcIik7XG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXG4gICAgICAuc2V0QnV0dG9uVGV4dChgUmVtb3ZlICR7dGhpcy53b3Jkc1RvUmVtb3ZlLmxlbmd0aH0gV29yZHNgKVxuICAgICAgLnNldEN0YSgpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMub25Db25maXJtUmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIk1lcmdlIFdvcmRzXCIpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMub25NZXJnZSgpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInN0eWxlXCIsIHtcbiAgICAgIHRleHQ6IGBcbiAgICAgICAgLmRpY3Rpb25hcnktbWVyZ2Utd29yZHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LW1lcmdlLW1vcmUtdGV4dCB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5kaWN0aW9uYXJ5LW1lcmdlLWJ1dHRvbnMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXFEOzs7QUNDOUMsSUFBTSxpQkFBTixNQUFxQjtBQUFBLEVBRzFCLGNBQWM7QUFDWixVQUFNLFdBQVcsUUFBUSxVQUFVO0FBQ25DLFFBQUksWUFBWSxTQUFTLFFBQVE7QUFDL0IsWUFBTSxTQUFTLFNBQVM7QUFDeEIsWUFBTSxxQkFBcUIsT0FBTyxzQkFBc0I7QUFDeEQsV0FBSyxVQUFVLG1CQUFtQjtBQUFBLElBQ3BDO0FBQUEsRUFDRjtBQUFBLEVBRUEsUUFBUSxVQUFrQjtBQUN4QixTQUFLLFFBQVEsZ0NBQWdDLFFBQVE7QUFBQSxFQUN2RDtBQUFBLEVBRUEsV0FBVyxNQUFjO0FBQ3ZCLFNBQUssUUFBUSxxQ0FBcUMsSUFBSTtBQUFBLEVBQ3hEO0FBQUEsRUFFQSxNQUFNLFlBQStCO0FBQ25DLFdBQU8sTUFBTSxLQUFLLFFBQVEsa0NBQWtDO0FBQUEsRUFDOUQ7QUFDRjtBQUdPLElBQU0saUJBQWlCLElB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QUEsZ0JBQ3BGO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFBQSxVQUNGO0FBQ0EsZ0JBQU0sS0FBSztBQUFBLFFBQ2IsT0FBTztBQUVMLGNBQUksc0JBQXNCO0FBQzFCLHFCQUFXLFFBQVEsZUFBZTtBQUNoQywyQkFBZSxXQUFXLElBQUk7QUFDOUI7QUFBQSxVQUNGO0FBRUEsY0FBSSxrQkFBa0I7QUFDdEIscUJBQVcsUUFBUSxZQUFZO0FBQzdCLDJCQUFlLFFBQVEsSUFBSTtBQUMzQjtBQUFBLFVBQ0Y7QUFFQSxlQUFLLGtCQUFrQixLQUFLLHNCQUFzQixNQUFNLFlBQVk7QUFDbEUsZ0JBQUk7QUFBQSxjQUNGLDZCQUE2QiwwQ0FBMEM7QUFBQSxZQUN6RTtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0YsU0FBUyxXQUFQO0FBQ0EsY0FBUSxNQUFNLGdDQUFnQyxTQUFTO0FBQUEsSUFDekQ7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLDBCQUEwQjtBQUU5QixVQUFNLGFBQWMsTUFBTSxLQUFLLFNBQVM7QUFFeEMsUUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXO0FBQWEsYUFBTztBQUluRCxVQUFNLGVBQWUsS0FBSyxTQUFTO0FBQ25DLFVBQU0sZ0JBQWdCLFdBQVc7QUFFakMsUUFDRSxhQUFhLFdBQVcsY0FBYyxVQUN0QyxDQUFDLGFBQWEsTUFBTSxDQUFDLFNBQVMsY0FBYyxTQUFTLElBQUksQ0FBQyxLQUMxRCxDQUFDLGNBQWMsTUFBTSxDQUFDLFNBQVMsYUFBYSxTQUFTLElBQUksQ0FBQyxHQUMxRDtBQUVBLFdBQUssU0FBUyxjQUFjLENBQUMsR0FBRyxhQUFhO0FBRzdDLFdBQUssU0FBUyxZQUFZO0FBQUEsUUFBSyxDQUFDLEdBQVcsTUFDekMsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLFlBQVksQ0FBQztBQUFBLE1BQy9DO0FBR0EsV0FBSyxZQUFZLFFBQVE7QUFFekIsY0FBUTtBQUFBLFFBQ04sMEVBQTBFLGNBQWM7QUFBQSxNQUMxRjtBQUNBLGFBQU87QUFBQSxJQUNUO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzNFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbkM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
